{% extends "base.html" %}
{% block start %}

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>



  .navbar {
    background: linear-gradient(90deg, #1a1a1a, #3a3a3a);
    
  }


  .card {
    border: none;
    border-radius: 16px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
    background: #161616;
  }


  .form-label {
    font-weight: 600;
    color: #f3df27;
  }

  .form-control {
    border-radius: 12px;
    border: none;
    background: #222;
    color: #fff;
  }

 
  input.form-control::placeholder,
  textarea.form-control::placeholder {
    color: #bdbabaff !important;
    opacity: 1;
  }
  :-ms-input-placeholder { color: #bdbabaff !important; }   
  ::-ms-input-placeholder { color: #bdbabaff !important; } 

  .form-control:focus {
    border: 2px solid #f3df27;
    box-shadow: none;
    background: #1e1e1e;
    color: #fff;
  }


  .btn-custom {
    background: linear-gradient(90deg, #f3df27, #d9b800);
    color: #161616;
    font-weight: bold;
    border-radius: 12px;
    border: none;
    transition: 0.3s;
  }

  .btn-custom:hover {
    opacity: 0.9;
    transform: scale(1.02);
  }


  .summary-box {
    border-radius: 16px;
    padding: 16px 22px;
    text-align: center;
    font-weight: 600;
    min-width: 120px;
    background: #161616;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    transition: 0.3s;
  }

  .summary-box:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.6);
  }

.summary-credit {
  background: linear-gradient(135deg, #6f2ff9ff, #cab3feff);
}

.summary-total {
  background: linear-gradient(135deg, #ff9100ff, #f7e96c);
}

.summary-debit {
  background: linear-gradient(135deg, #ff4444, #ff9a9aff);
}

  .summary-box p {
    margin: 0;
    font-size: 15px;
  }

  .summary-box p:last-child {
    font-size: 18px;
    font-weight: bold;
  }


  table.table {
  background: #000 !important;
  color: #fff !important;
}

table.table thead th {
  background-color: #000 !important;
  color: #fff !important;
}

table.table tbody tr {
  background: #000 !important;
  color: #fff !important;
}


table.table tbody tr:nth-child(even) {
  background: #111 !important;
}


table.table tbody tr:hover {
  background: #222 !important;
}



  .bg-delete {
    background: #FFD700 !important;
    border-radius: 8px;
    padding: 6px 10px;
    font-weight: 700;
    color: #161616 !important;
    transition: 0.3s;
  }

  .bg-delete:hover {
    background: #e6c200 !important;
    color: #000 !important;
  }


  .bg-color {
    color: #f3df27 !important;
  }

  .center {
    text-align: center;
    font-weight: bold;
  }


  @media (max-width: 768px) {
    .summary-box {
      padding: 12px 16px !important;
      width: 100%;
      max-width: 220px;
      margin: 0 auto 10px;
    }

    table thead {
      font-size: 12px;
    }

    table td {
      font-size: 13px;
    }
  }
</style>


<nav class="navbar navbar-expand-lg navbar-dark px-4 mb-4 shadow-sm">
  <div class="w-100 d-flex justify-content-between align-items-center">
    {% if user %}
    <span class="text-white me-3">Welcome, {{ user }}</span>
    <a href="{% url 'logout' %}" class="btn btn-outline-light btn-sm">Logout</a>
    {% else %}
    <a href="" class="btn btn-outline-light btn-sm">Login</a>
    {% endif %}
  </div>
</nav>


<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-12 col-sm-10 col-md-8 col-lg-6">
      <div class="card p-4 mt-3 mb-5">
        <div class="center mb-3">
          <h2 class="bg-color">Expense Tracker</h2>
        </div>

        {% if messages %}
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }} mt-2">{{ message }}</div>
        {% endfor %}
        {% endif %}

        <form method="POST" enctype="multipart/form-data" class="mt-4 mb-4">
          {% csrf_token %}
          <div class="mb-3">
            <label for="expensename" class="form-label">Enter Expense Name</label>
            <input type="text" class="form-control" name="expensename" id="expensename" placeholder="E.g., House Loan" />
          </div>
          <div class="mb-3">
            <label for="expenseamount" class="form-label">Enter Amount</label>
            <input type="text" class="form-control" name="amount" id="expenseamount" placeholder="E.g., Credit = 3000 or Debit = -3000" />
          </div>
          <button type="submit" class="btn btn-custom w-100 mt-2 text-capitalize">add expense</button>
        </form>

 
        <div class="center d-flex flex-wrap justify-content-center text-white gap-3">
          <div class="summary-box summary-credit px-5">
            <p>Credited</p>
            <p>{{ total_amount.credit_amount }}</p>
          </div>
          <div class="summary-box summary-total px-5">
            <p>Total</p>
            <p>{{ total_amount.total_income }}</p>
          </div>
          <div class="summary-box summary-debit px-5">
            <p>Debited</p>
            <p>{{ total_amount.debit_amount }}</p>
          </div>
        </div>

   
        <div class="table-responsive mt-4">
          <table class="table table-hover align-middle">
            <thead>
              <tr>
                <th>Expense Name</th>
                <th>Type</th>
                <th>Amount</th>
                <th>Date</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              {% for eachrecord in all_expenses %}
              <tr>
                <td>{{ eachrecord.expense_name }}</td>
                <td>
                  <span class="badge {% if eachrecord.expense_type == 'Credit' %}bg-success{% else %}bg-danger{% endif %}">
                    {{ eachrecord.expense_type }}
                  </span>
                </td>
                <td>{{ eachrecord.amount }}</td>
                <td>{{ eachrecord.created_at }}</td>
                <td>
                  <a href="{% url 'delete_task' eachrecord.id %}" class="badge bg-delete text-decoration-none">Delete</a>
                </td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="5" class="text-center text-muted">No expenses recorded yet.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>
</div>

{% endblock %}
